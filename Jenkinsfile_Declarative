pipeline {
    env.path = "C:/Softwares/apache-maven-3.8.4/bin;C:\\Windows\\System32"
    stages{
    stage('checkout'){
    steps{
        git 'https://github.com/bharathwaj13/MyFramework.git'
        }
        }
    stage('build'){
    steps{
    
        dir('C:\\Users\\bhara\\eclipse-workspace\\FrameworkFromScratch') 
        {
            bat 'mvn package'
        }
        }
    }
    stage('archive'){
    steps{
        dir('C:\\Users\\bhara\\.jenkins\\workspace\\EPAM_JenkinsLearn02_MavenProjectExecution')
        {
            archiveArtifacts artifacts: 'target/*.jar', followSymlinks: false
        }
        }
    }
    stage('email'){
        //emailext attachLog: true, body: 'Please look into the issue if there is a failure', subject: 'Jenkins Build Result', to: 'cc:arvindramachandran.91@gmail.com, viswa91.sekar@gmail.com'
        steps{
        sendmail()
        }
    }
    
    }
    
}
// Creating a method for sending mail
def sendmail(){
         emailext attachLog: true, body: 'Please go and verify the build', subject: 'Daemon Tools Autogenerated Pipeline', to: 'cc:arvindramachandran.91@gmail.com, viswa91.sekar@gmail.com'
    }