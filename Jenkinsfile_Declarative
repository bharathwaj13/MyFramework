pipeline {
	agent any
    
    stages{
    stage('checkout'){
	    steps{
	        	echo 'Checking out!'
	        	git 'https://github.com/bharathwaj13/MyFramework.git'
	        }
        }
    stage('build'){
	    steps{
	    		echo 'Building out!'
	    		script{
	    			env.path = "C:/Softwares/apache-maven-3.8.4/bin;C:\\Windows\\System32"
	    		}
	    		
	    		dir('C:\\Users\\bhara\\eclipse-workspace\\FrameworkFromScratch') 
			        {
			            bat 'mvn package'
			        }
	        }
    }
    stage('archive'){
    steps{
        echo 'Archiving out!'
	        dir('C:\\Users\\bhara\\.jenkins\\workspace\\EPAM_JenkinsLearn02_MavenProjectExecution')
	        {
	            archiveArtifacts artifacts: 'target/*.jar', followSymlinks: false
	        }
        }
    }
    
    }
    
    post{
    		always{
    				echo 'Emailing'
    				emailext attachLog: true, body: 'Please go and verify the build', subject: 'Daemon Tools Autogenerated Pipeline', to: 'cc:arvindramachandran.91@gmail.com, viswa91.sekar@gmail.com'
}
}
}